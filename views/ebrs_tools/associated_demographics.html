
<script type="text/javascript" src="/public/touchscreentoolkit/lib/javascripts/touchScreenToolkit.js" defer="true"></script>
<!-- <script type="text/javascript" src="/public/touchscreentoolkit/lib/javascripts/standard.js" defer="true"></script> -->
<script type="text/javascript" src="/assets/js/jquery.min.js"></script>

<script type="text/javascript" src="/assets/js/yes_no_ctrls.js"></script>
<link rel="stylesheet" href="/assets/css/yes_no_ctrls.css" type="text/css">
<script type="text/javascript" src="/assets/js/post_parameters.js"></script>
<script type="text/javascript" src="/assets/js/generic_ajaxrequest.js"></script>
<script type="text/javascript" src="/assets/js/moment.js"></script>
<script type="text/javascript" src="/apps/MATERNITY/assets/js/additional_demographics.js"></script>
<script type="text/javascript" src="/assets/js/alertifyjs/alertify.js"></script>
<script type="text/javascript" src="/assets/js/does_connection_exist.js"></script>

<link rel="stylesheet" href="/assets/css/alertifyjs/css/alertify.css" type="text/css">

<script>
    var tt_cancel_destination = "/views/patient_dashboard.html?patient_id=" + sessionStorage.patientID;

    function enroll () {
        document.location = '/views/patient/enroll_patient_into_program.html'
    }
</script>

<style>
    #clearButton { display: none; }

    .main-table {
        display: table;
        width: 100%;
    }

    .table-row {
        display: table-row;
    }

    .table-cell {
        display: table-cell;
    }

    .left-cell {
        width: 30%;
        float: left;
    }

    .program-tables {
        width: 100%;
        border-collapse: separate;
        margin: 5px;
        border-spacing: 20px;
        color: black;
    }

    .program-names {
        border-style: solid;
        border-width: 1px;
        text-align: center;
        line-height: 20px;
        height: 50px;
        padding: 10px;
        box-shadow: 5px 10px #888888;
    }

    #cell-right {
        width: 68%;
        float: right;
        vertical-align: top;
        height: 575px;
        border-style: solid;
        border-width: 0px 0px 0px 1px;

    }

    .states {
        border: solid 1px;
        width: 98%;
        border-radius: 9px;
        box-shadow: 5px 10px #888888;
        margin-left: 1%;
    }

    .states th {
        text-align: left;
    }


    #cell-left {
        width: 30%;
        float: left;
    }

    #inputFrame0 {
        overflow: auto;
    }


</style>


<body id="mateme">
<div id="container">
    <div id="content">
        <form>

            <input type="text" name="summary"
                   tt_onLoad="__$('keyboard').style.display = 'none';setUpProgramPage();"
                   tt_pageStyleClass= "NoControls" helpText="Associated Demographics (Father/Children)" optional = "true"/>

        </form>
    </div>
</div>
</body>

<script>

    function setUpProgramPage() {
        var f = document.getElementById('inputFrame' + tstCurrentPage);
        f.style = 'width: 96%; height: 88%;';

        var div = document.createElement('div');
        div.setAttribute('class','main-table');
        f.appendChild(div);

        var row = document.createElement('div');
        row.setAttribute('class','table-row');
        div.appendChild(row);

        var cells = ['left','right'];
        for(var i = 0 ; i < cells.length ; i++){
            var cell = document.createElement('div');
            cell.setAttribute('class','table-cell');
            cell.setAttribute('id','cell-' + cells[i]);
            row.appendChild(cell);
        }

        addAssociationTools();
        var nextButton = document.getElementById('nextButton');
        nextButton.setAttribute('onmousedown', 'enroll();');
        nextButton.innerHTML = '<span>Finish</span>';
    }

    var programsHash = {};

    function addAssociationTools() {
        var associationTools = [['Father Demographics','URL'],['Child Demographics','URL'],['Child Birth Report','URL']];


        var container = document.getElementById('cell-left');
        var table = document.createElement('table');
        table.setAttribute('class','program-tables');
        container.appendChild(table);

        for(var i = 0 ; i < associationTools.length ; i++){

            var programName = associationTools[i][0];
            var url = associationTools[i][1];

            var tr = document.createElement('tr');
            var td = document.createElement('td');
            td.setAttribute('class','program-names');
            td.setAttribute('id', name+'_id');
            td.setAttribute('program-name', programName);
            td.setAttribute('onmousedown','showAssociationTools(this);');
            td.innerHTML = programName
            tr.appendChild(td);

            table.appendChild(tr);
        }
    }

    function showAssociationTools(program) {

        var programName = program.getAttribute('program-name');

        var container = document.getElementById('cell-right');
        container.innerHTML = null;
        var table = document.createElement('table');
        table.setAttribute('class','program-tables');
        container.appendChild(table);

        var tr = document.createElement('tr');
        var td = document.createElement('td');
        td.setAttribute('class','program-states');
        tr.appendChild(td);
        table.appendChild(tr);

        var table = document.createElement('table');
        table.className = 'states';
        container.appendChild(table);

        if (programName === 'Child Birth Report') {
            buildBirthReportButtons(td,2,table);
        } else {
            fetchPersonDemographics(td,table);
        }

        // buildNames(td, ['John','Jay','Doe'], table);
        // buildHomeAddresses(td, ['Lilongwe','Mtema','Biwi'], table);
        // buildCurrentAddresses(td, ['Lilongwe','Mtema','Biwi'], table);

        // if (!programHasStates) {
        //     var tableRow = document.createElement('tr')
        //     tableRow.style.textAlign = 'center'
        //     tableRow.style.fontSize = '1.4em'
        //     var message = document.createElement('p')
        //     message.innerText = 'This program has no states so far.'
        //     tableRow.appendChild(message)
        //     table.appendChild(tableRow)
        // }

        var btns = document.getElementsByClassName('program-names');
        for(var i = 0 ; i < btns.length ; i++){
            btns[i].style = 'background-color: "";';
        }

        program.style = 'background-color: lightblue;';

        //Add program update state button
        if(document.getElementById('update-state') == undefined) {
            var btn = document.createElement('button');
        }else{
            var btn = document.getElementById('update-state');
        }

        btn.setAttribute('id','update-state');
        btn.setAttribute('class','button blue navButton');
        btn.innerHTML = '<span>Edit Demo</span>';
        btn.setAttribute('onmousedown','updateState(' + program.id + ');');

        var root = document.getElementById('buttons');
        root.appendChild(btn);
    }

</script>
